<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exponential Search</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header -->
  <div class="header">
    <h1>Exponential Search</h1>
  </div>

  <!-- Content -->
  <div class="content">
    <!-- Input Form -->
    <div class="mb-4">
      <label for="data" class="form-label">Enter Data (comma separated):</label>
      <div class="input-group">
        <input type="text" class="form-control" id="data" placeholder="e.g., 10, 20, 30, 40, 50" oninput="updateDataBoxes()">
        <button class="btn btn-outline-secondary" type="button" id="generateData" onclick="generateRandomData()">
          <i class="bi bi-shuffle"></i>
        </button>
      </div>
    </div>

    <!-- Search Key -->
    <div class="mb-4">
      <label for="searchKey" class="form-label">Enter Data</label>
      <input type="text" class="form-control" id="searchKey" placeholder="e.g., 30">
    </div>

    <!-- Buttons -->
    <div class="d-grid gap-2">
      <button class="btn btn-primary btn-lg mb-3" onclick="searchData()">Start Search</button>
    </div>

    <!-- Search Result -->
    <div class="mb-2">
      <div id="result" class="alert alert-info">Search Result.....</div>
    </div>

    <!-- Visualization of Search Process -->
    <div class="mb-4">
      <h5 class="text-center">Search Process:</h5>
      <div id="searchProcess" class="d-flex justify-content-center flex-wrap">
        <!-- Boxes will appear here -->
      </div>
    </div>
  </div>

  <!-- Bottom Navigation Buttons -->
  <div class="bottom-nav">
    <a href="index.html"><button>Prev</button></a>
    <a href=""><button>Next</button></a>
  </div>

  <script>
    // Generate random data
    function generateRandomData() {
      let data = [];
      let length = Math.floor(Math.random() * 10) + 5; // Generate between 5 to 15 numbers
      for (let i = 0; i < length; i++) {
        let randomNumber = Math.floor(Math.random() * 100) + 1; // Number between 1 and 100
        data.push(randomNumber);
      }
      data.sort((a, b) => a - b); // Sort the data for Exponential Search
      document.getElementById('data').value = data.join(', ');
      updateDataBoxes();
    }

    // Update data boxes on input change
    function updateDataBoxes() {
      let dataInput = document.getElementById('data').value;
      let dataArray = dataInput.split(',').map(Number);
      displayDataBoxes(dataArray);
    }

    // Display data as boxes
    function displayDataBoxes(arr) {
      let searchProcess = document.getElementById('searchProcess');
      searchProcess.innerHTML = ''; // Reset box display
      arr.forEach(num => {
        let div = document.createElement('div');
        div.classList.add('box');
        div.textContent = num;
        searchProcess.appendChild(div);
      });
    }

    // Start search
    function searchData() {
      let dataInput = document.getElementById('data').value;
      let searchKey = document.getElementById('searchKey').value;
      let dataArray = dataInput.split(',').map(Number);

      displayDataBoxes(dataArray);

      document.getElementById('result').textContent = "Start Search...";

      exponentialSearch(dataArray, Number(searchKey));
    }

    // Exponential Search function
    function exponentialSearch(arr, key) {
        let n = arr.length;
        let i = 1;
        let boxes = document.querySelectorAll('.box');
  
        function highlightExponential() {
          if (i < n && arr[i] <= key) {
            boxes[i].classList.add('highlight');
            setTimeout(() => {
              boxes[i].classList.remove('highlight');
              i = i * 2;
              highlightExponential();
            }, 1000);
          } else {
            binarySearch(arr, Math.floor(i / 2), Math.min(i, n - 1), key);
          }
        }
  
        if (arr[0] === key) {
          displayResult(0, key, true);
        } else {
          highlightExponential();
        }
      }
  
      // Binary Search function
      function binarySearch(arr, left, right, key) {
        let boxes = document.querySelectorAll('.box');
  
        function search(left, right) {
          if (left <= right) {
            let mid = Math.floor((left + right) / 2);
            boxes[mid].classList.add('highlight');
  
            setTimeout(() => {
              if (arr[mid] === key) {
                boxes[mid].classList.remove('highlight');
                boxes[mid].classList.add('found');
                displayResult(mid, key, true);
              } else {
                boxes[mid].classList.remove('highlight');
                boxes[mid].classList.add('not-found');
                if (arr[mid] < key) {
                  search(mid + 1, right);
                } else {
                  search(left, mid - 1);
                }
              }
            }, 1000);
          } else {
            displayResult(-1, key, false);
          }
        }
  
        search(left, right);
      }

     // Display search result
     function displayResult(index, key, found) {
        let resultElement = document.getElementById('result');
        if (found) {
          resultElement.className = "alert alert-success";
          resultElement.textContent = `Element ${key} found at index ${index}`;
        } else {
          resultElement.className = "alert alert-danger";
          resultElement.textContent = `Element ${key} not found`;
        }
      }
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
