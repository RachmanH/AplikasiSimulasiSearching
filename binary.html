<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Binary Search</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header -->
  <div class="header">
    <h1>Binary Search</h1>
  </div>

  <!-- Content -->
  <div class="content">
    <!-- Input Form -->
    <div class="mb-4">
      <label for="data" class="form-label">Enter Data (comma separated):</label>
      <div class="input-group">
        <input type="text" class="form-control" id="data" placeholder="e.g., 10, 20, 30, 40, 50" oninput="updateDataBoxes()">
        <button class="btn btn-outline-secondary" type="button" onclick="generateRandomData()">
          <i class="bi bi-shuffle"></i>
        </button>
      </div>
    </div>

    <!-- Search Key -->
    <div class="mb-4">
      <label for="searchKey" class="form-label">Enter Search Key</label>
      <input type="text" class="form-control" id="searchKey" placeholder="e.g., 30">
    </div>

    <!-- Buttons -->
    <div class="d-grid gap-2">
      <button class="btn btn-primary btn-lg mb-3" onclick="searchData()">Start Binary Search</button>
    </div>

    <!-- Search Result -->
    <div class="mb-2">
      <div id="result" class="alert alert-info">Search Result.....</div>
    </div>

    <!-- Visualization of Search Process -->
    <div class="mb-4">
      <h5 class="text-center">Search Process:</h5>
      <div id="searchProcess" class="d-flex justify-content-center flex-wrap">
        <!-- Boxes will appear here -->
      </div>
    </div>
  </div>

  <!-- Bottom Navigation Buttons -->
  <div class="bottom-nav">
    <a href="menu.html"><button>Prev</button></a>
    <a href=""><button>Next</button></a>
  </div>

  <script>
    // Generate random data
    function generateRandomData() {
      let data = [];
      let length = Math.floor(Math.random() * 10) + 5; // Generate between 5 to 15 numbers
      for (let i = 0; i < length; i++) {
        let randomNumber = Math.floor(Math.random() * 100) + 1; // Number between 1 and 100
        data.push(randomNumber);
      }
      data.sort((a, b) => a - b); // Sort the data for Binary Search
      document.getElementById('data').value = data.join(', ');
      updateDataBoxes();
    }

    // Fungsi untuk update kotak-kotak data setiap ada perubahan input
    function updateDataBoxes() {
        let dataInput = document.getElementById('data').value;
        let dataArray = dataInput.split(',').map(Number);
        displayDataBoxes(dataArray);
    }

    // Fungsi untuk menampilkan kotak-kotak data
    function displayDataBoxes(arr) {
        let searchProcess = document.getElementById('searchProcess');
        searchProcess.innerHTML = ''; // Reset tampilan kotak
        arr.forEach(num => {
            let div = document.createElement('div');
            div.classList.add('box');
            div.textContent = num;
            searchProcess.appendChild(div);
        });
    }

    // Fungsi untuk mulai pencarian
    function searchData() {
      let dataInput = document.getElementById('data').value;
      let searchKey = document.getElementById('searchKey').value;

      if (!searchKey || isNaN(searchKey)) {
        document.getElementById('result').textContent = "Please enter a valid number for the search key.";
        return;
      }

      let dataArray = dataInput.split(',').map(Number);

      // Tampilkan ulang kotak setelah sorting
      displayDataBoxes(dataArray);

      // Update pesan ke "Start Search..." setelah sorting selesai
      document.getElementById('result').textContent = "Start Search...";

      // Mulai binary search
      binarySearch(dataArray, Number(searchKey));
    }

    // Fungsi Binary Search
    function binarySearch(arr, key) {
        let low = 0;
        let high = arr.length - 1;
        let boxes = document.querySelectorAll('.box');

        function highlightNext() {
            if (low <= high) {
                let mid = Math.floor((low + high) / 2);
                boxes[mid].classList.add('highlight');
                setTimeout(() => {
                    if (arr[mid] === key) {
                        document.getElementById('result').textContent = `Elemen ${key} ditemukan pada indeks ${mid}`;
                        boxes[mid].classList.remove('highlight');
                        boxes[mid].classList.add('found');
                    } else {
                        boxes[mid].classList.remove('highlight');
                        boxes[mid].classList.add('not-found');
                        if (arr[mid] < key) {
                            low = mid + 1;
                        } else {
                            high = mid - 1;
                        }
                        highlightNext();
                    }
                }, 1000);
            } else {
                document.getElementById('result').textContent = `Elemen ${key} tidak ditemukan`;
            }
        }
        highlightNext();
    }
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
